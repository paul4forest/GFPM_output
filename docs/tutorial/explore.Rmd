```{r, echo=FALSE}
# Set same path for knitr evaluation as for interactive use
opts_knit$set(root.dir = '../..')
opts_chunk$set(fig.width=10)
```

```{r warning=FALSE}
library(plyr)
library(GFPMoutput)
```

Explore GFPM scenarios
=====================
Load scenario
```{r}
load("enddata/GFPM_training_scenarios.RDATA")
```

Plots
-----
### Base scenario
```{r sawnwood_base}
plotProdByReg(trainingScenarios, "Sawnwood", "Base")
```

```{r roundwood_base}
plotProdByReg(trainingScenarios, "IndRound", "Base")
```

### Compare the base scenario with other scenarios
The other 2 training scenarios, where calculated by changing the demand
elasticities by plus or minus 1 standard error, corresponding to a 
confidence intereval of 70%.
```{r sawnwood_demand}
dtf <- subset(trainingScenarios$aggregates, Product=="Sawnwood"& Element=="Demand")
ggplot(data = dtf) +
    aes(x = Period, y = Volume, colour = GFPM_REG, linetype = Scenario) +
    geom_line() + ggtitle("Sawnwood Demand") +
    theme(legend.position = "bottom")
```

Compare for all products
```{r compare_demand_scenarios}
dtf <- subset(trainingScenarios$aggregates, Element=="Demand" & 
                  ! Product %in% c("MechPlp", "ChemPlp", "WastePaper"))
ggplot(data = dtf) +
    aes(x = Period, y = Volume, colour = GFPM_REG, linetype = Scenario) +
    geom_line() + ggtitle("Demand") +
    theme(legend.position = "bottom") + facet_wrap(~Product, scales="free_y")
```

Data summaries
--------------
### What products are demanded, supplied, produced or traded ?
```{r}
whatproducts = function(dtf){unique(dtf$Product)}
dlply(trainingScenarios$entity, .(Element), whatproducts)[-2]
```
* IndRound is supplied and traded but not demanded, it's a primary product.
* OthFbrPlp and WastePaper are supplied and traded but not demanded, they are primary products.
* Fuelwood is both supplied and demanded it's both a primary and a final product.
* Fuelwood is not the outcome of a production process.

### What is the structure of "trainingScenarios"
```{r}
str(trainingScenarios)
```

